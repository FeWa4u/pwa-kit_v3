---
title: Setting Up the SAP Hybris Connector
metaTitle: Setting Up the SAP Hybris Connector
metaDescription: "A step by step guide to set up the SAP Hybris Connector for projects with a SAP Hybris backend."
category: Integrations
minVersion: 2.0.0
maxVersion: 2.0.0
featured: false
---

import Tabs from 'progressive-web-sdk/dist/components/tabs/tabs'
import TabsPanel from 'progressive-web-sdk/dist/components/tabs/tabs-panel'

<Callout type="info">

**Note:** SAP Hybris Commerce Cloud projects should use the [HybrisConnector](/apis-and-sdks/commerce-integrations/connectors/hybris).

</Callout>

## Before you begin

To ensure your SAP Hybris Connector setup goes smoothly, make sure you have:

- Administrator-level access to SAP Hybris Backoffice
- A running instance of SAP Hybris Commerce Suite with version 6.4 or higher
- Access to the [SAP Hybris OCC docs](https://help.hybris.com/6.4.0/hcd/8c39af1286691014b2daed4f092998ca.html). (You will need an account to access the docs.)

## SAP Hybris fundamentals

Before diving in, you should brush up on the SAP Hybris OCC APIs. If you know nothing about the OCC APIs, you should at least know this:

- SAP Hybris has an API that covers common shopper interactions, called Omni Commerce Connector (OCC) API.
- OCC is a RESTful HTTP API which uses OAuth2.
- [`HybrisConnector`](/apis-and-sdks/commerce-integrations/connectors/hybris) is built using the [`hybris-occ-client`](https://github.com/mobify/hybris-occ-client).
- Under the hood, OCC uses the Java Spring framework and can be heavily customized.

Basic URLs look like this:

```javascript
https://$DOMAIN/rest/v2/$SITE/$ENDPOINT
https://www.example.com/rest/v2/apparel-uk/catalogs/
```

OAuth requests look like this:

```bash
curl https://hybris.merlinspotions.com/authorizationserver/oauth/token -X POST -d 'client_id=mobile_android&client_secret=secret&grant_type=client_credentials'
```

Once you have the access token, you can send it.

This is just the start. To learn more, we recommend reviewing the [OCC docs](https://accounts.sap.com/saml2/idp/sso/accounts.sap.com?SAMLRequest=fZHLTsMwFER%2FJfK%2BcV60jdVECu2CSgWiJrBggxzHIpYcO%2Fg6QP%2BePECULrq%2BM8cz4w3QVnYk622jjvy952Cdr1YqINMhQb1RRFMQQBRtORDLSJHdH0jgeqQz2mqmJXIyAG6s0GqrFfQtNwU3H4Lxp%2BMhQY21HRCMGy47tzlVRoDLdIuLRlSVltw2LoDGIzbA%2BWNRImc35BCKjsQ%2FP2VM98qCC7SbAGPEAIu6w6P%2F8oyc%2FS5Br7Xn02UcRjysVvENZTVdr8PQj2gcLVm1jAcZQM%2F3CixVNkGB58cLL1wE69JfET8mfvCCnPyn6q1QtVBv13epZhGQu7LMF3OjZ25gajMIULoZo5PpYXO293Us%2FR0ZpRdTbvAZb4Z35GEA7He5loKdnExK%2Fbk1nFqeIB%2FhdLb8%2F%2Fn0Gw%3D%3D&RelayState=ss%3Amem%3Ab268ea5b13af0066058ba29a9c050a4b7cc041614e532f94f207418c9d38e209&SigAlg=http%3A%2F%2Fwww.w3.org%2F2000%2F09%2Fxmldsig%23rsa-sha1&Signature=C7PqXPbpwZ9ciX1EPgPd3qlnquc62Li1si071oj0w8zLBNeBcTG8C1YcBJhj0v65MbuM107cR4w4TH6GtgGzWtYA82ejoB8MLGp3kNxIE1ACyWiTf%2BIjOdj8SmUx6X7OI2%2FapG1lJ252FlTOqpeP5Khh7mfgdGIiuN1kWKt74XzS8wGR5zJISmuVkSSrCQu%2BT%2FtQpNNaKo44CpYrzA2538O9pCsoXeukwXvODKoNoGVNyY%2B7DqsAsXhlHeVbZq6oSUAGpkNRwriOW4rDtpEGQP8VbzNNBjGnNdUFNAU%2BXJ9jzq7iJv9QRGrcsYlnuO7QrMLg2nbWAj29kUPby%2FEW3bPzyUtBum9t6WwULCxgmbLGFv93UMxgUM0yfJrCrRTj35iXXmncr%2FpDxiNrxK3%2FTehnwnH%2FEiim3xFEZnPLno%2B8lcYA1tiWmqeyN8HlB47j7DivrDLW0exP1l7bnsrAasRXbLBfjyyE8ZLRcq43aSZLDMGfz67rksByRXOWT8s33eaVwi6LjAvZrQCgyI2xNTSn8QfBFdAR63kMYhYR50229y82loMxjsTtj62nQWa%2B0Nqzy9jSRE1tqsqywZyNZS5dROzR7M8t8m5lPI5z0FRA%2FPUugFC9er0KFK1Y68EwlQJIphYrXon0332lALuNC8JhLtceEfdXzaH01eocMcw%3D). (You will need to login to your SAP account to access the docs.)

## Installing the Mobify Webservice Extension

To simplify integration, we provide the Mobify Webservice Extension for SAP Hybris Commerce Suite. The extension modifies your SAP Hybris Webservice to provide additional functionality for your PWA. For example, it enables your PWA's guest users to change their email address, and also supports storing additional information, such as phone numbers.

**Installing the extension**

1. Download and unzip the [Mobify extension](https://s3.amazonaws.com/downloads.mobify.com/hybris-extension/MobifyExtension.zip) to your SAP Hybris file system: `/hybris/bin/custom/PROJECT_NAME`

2. In `/hybris/bin/custom/PROJECT_NAME`, you will find four Mobify extension folders. In your server-side rendered project, you will only be using the `mobifywebservices` addon.

3. Add the following lines to `localextensions.xml`:

```xml
<!--Mobify Extensions-->
<extension name="mobifywebservices" />
```

4. Next, run `ant clean all` in your command line tool.
5. Start the server for your Hybris instance. For example, we start the server for our Hybris instance by executing the following commands:
   - Unix: `./hybrisserver.sh`
   - Windows: `hybrisserver.bat`
6. After starting the server, open a browser and navigate to your **Hybris Administration Console**, then login. _(Note that the Hybris Administration Console is a different site than your SAP Backoffice.)_
7. Once you're logged in, click on **Platform** on the top menu, and then **Update** in the dropdown items. On the **Update** page, select the following options under the **General settings** heading:
   - [x] Update running system
   - [x] Clear the hMC configuration from the database
   - [x] Localize types

At the bottom of the page, click on **update**. This will apply the changes to Hybris Backoffice.

**Verifying your extension installed successfully**

1. In your browser, navigate to your **Hybris Administration Console** and login. _(Note that this is a different site than your SAP Backoffice.)_
2. Once you're logged in, click on **Platform** on the top menu, and then **Extensions** in the dropdown items.
3. Locate the search tool and enter the keyword "mobify".
4. `mobifywebservices` will be listed in your extensions if you've installed it correctly.

## Making your API available to the connector

1. Login to your **SAP Hybris Backoffice**.
2. On the left side navigation panel, choose **System**, then select **OAuth**, and choose **OAuth Clients**.
3. Click the **+** button.
4. In the pop-up box, enter the **OAuth client ID** and **Client Secret**.
5. Click Next, and you’ll skip to the **Basic** page.
6. On the **Basic** page, find **Authorities** and click the **+** button.
7. In the text field that appears, enter **ROLE_CLIENT**, then Add.
8. Find **Client Grant Types** and click the **+** button.
9. In the text field that appears, enter three separate entries: **client_credentials**, **refresh_token**, and **password**. Click Add for each.
10. Click Next, which will skip you to the **Scopes** page.
11. On the **Scopes** page, enter the scope of your oauth client. For example, we would enter “merlinspotions” for our demo.
12. Click **Done**.

## Configuring your SAP Hybris instance

When your project gets generated, you get a starting point SAP Hybris connector, which you will be replacing.

To configure and instantiate your instance of the SAP Hybris connector:

1. Go to the file `<PROJECT_DIR>/app/connector.js` and import the SAP Hybris Connector.
2. Extend the connector class and make any customizations you’d like. For a list of all the utility functions we’ve already built, read our [HybrisConnector Reference docs](/apis-and-sdks/commerce-integrations/connectors/hybris).
3. Modify the `getConnector` method to return a new instance of your extended connector.
